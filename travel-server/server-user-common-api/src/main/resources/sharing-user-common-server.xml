<?xml version="1.0" encoding="UTF-8"?>
<servers>
	<server name="UserCommonServer">
		<default class="qingning.user.common.server.imp.UserCommonServerImpl">

			<!--购买主页-->
			<function name="buyIndex">
				<auth>
					<accessToken require="Y" />
					<timesLimit millisecond="500" />
				</auth>
				<inputs>
				</inputs>
				<outputs>
					<param name="access_info" fieldname="access_remark" type="string"/>
					<param name="buy_info" type="string"/>
					<param name="access_type" type="string"/>
					<param name="access_price" fieldname="ticket_price" type="double"/>
					<param name="banner_list" type="list">
						<param name="banner_id" fieldname="extension_id" type="string"/>
						<param name="banner_title" fieldname="extension_title" type="string"/>
						<param name="banner_image" fieldname="extension_img" type="string"/>
					</param>
				</outputs>
			</function>

			<!--用户信息-->
			<function name="userInfo">
				<auth>
					<accessToken require="Y" />
				</auth>
				<inputs>
				</inputs>
				<outputs>
					<param name="user_id"  type="string"/>
					<param name="nick_name" type="string"/>
					<param name="avatar_address" type="string"/>
					<param name="is_vip" default="0" type="string"/>
					<param name="invalid_time" type="long"/>
					<param name="rq_code" type="string"/>

				</outputs>
			</function>

			<function name="qiNiuUploadToken">
				<auth>
					<accessToken require="Y" />
				</auth>
				<inputs>
					<param name="upload_type" type="string" require="Y,000100"  />
				</inputs>
				<outputs>
				</outputs>
			</function>
			
			<function name="userLogin">
				<auth>
					<accessToken require="N" />
				</auth>
				<inputs>
					<param name="login_id" type="string" require="Y,000100"  />
					<param name="login_type" type="string" require="Y,000100"  format="^[024]$,000004"/>
					<param name="certification" type="string" require="Y,000100"  />
					<param name="refresh_token" type="string" require="N"  />
					<param name="avatar_address" type="string" require="N"  />
					<param name="nick_name" type="rstring" require="N"  />
					<param name="server_url_update_time" type="long" require="N"  />
					<param name="device_id" type="string" require="Y,000100"  />
					<param name="gender" type="string" require="N"  />
				</inputs>
				<outputs>
					<param name="access_token" type="string"/>
					<param name="user_id" type="string"/>
					<param name="nick_name" type="rstring"/>
					<param name="phone" type="rstring"/>
					<param name="is_vip" type="rstring"/>
					<param name="server_url_info_update_time" type="long"/>
					<param name="avatar_address" type="string"/>
					<param name="server_url_info_list" type="list">
						<param name="protocol" type="string"/>
						<param name="domain_name" type="string"/>
						<param name="method" type="string"/>
						<param name="server_url" type="string"/>
					</param>					
				</outputs>
			</function>

			
			<function name="updateUserInfo">
				<auth>
					<accessToken require="Y" />
					<timesLimit millisecond="100" />
				</auth>
				<inputs>
					<param name="nick_name" type="rstring"/>
					<param name="avatar_address" type="string"/>
					<param name="rq_card_address" type="string"/>
				</inputs>
				<outputs>					
				</outputs>
			</function>
			
			<function name="weiXinConfiguration">
				<auth>
					<accessToken require="N" />
				</auth>
				<inputs>
					<param name="url" type="string" require="Y,000100"  />
				</inputs>
				<outputs>
				</outputs>
			</function>
			
			<function name="getMyCourseList">
				<auth>
					<accessToken require="Y" />
				</auth>
				<inputs>
					<param name="position" type="int"/>
					<param name="page_count" type="int"/>
				</inputs>
				<outputs>
					<param name="course_info_list" type="list" require="Y" >
						<param name="course_id" type="string" />
						<param name="course_url" type="string" />
						<param name="course_type" type="string" />
						<param name="course_title" type="string" />
						<param name="lecturer_name" type="string" />
						<param name="lecturer_title" type="string" />
						<param name="length" type="long" />
						<param name="position" type="long" />
					</param>
				</outputs>
			</function>
			<function name="getMyCostList">
				<auth>
					<accessToken require="Y" />
				</auth>
				<inputs>
					<param name="position" type="int"/>
					<param name="page_count" type="int"/>
				</inputs>
				<outputs>
					<param name="cost_info_list" type="list" require="Y" >
						<param name="payment" type="double" />
						<param name="create_time" type="long" />
						<param name="consumer_behavior" type="string" />
						<param name="payment_type" type="string" />
						<param name="shop_name" type="string" />
						<param name="position" type="long" />
					</param>
				</outputs>
			</function>
			<function name="weixinCodeUserLogin">
				<auth>
					<accessToken require="N" />
				</auth>
				<inputs>
					<param name="code" type="string"  validate="(code)=>{
					       		var isEmpty= code==null || code.length == 0;
					       		return !isEmpty;},000100"/>
				</inputs>
				<outputs>
					<param name="access_token" type="string"/>
					<param name="key" type="string"/>
					<param name="m_user_id" type="string"/>
					<param name="user_id" type="string"/>
					<param name="nick_name" type="rstring"/>
					<param name="server_url_info_update_time" type="long"/>
					<param name="avatar_address" type="string"/>
					<param name="im_account_info" type="string"/>
					<param name="web_im_url" type="string"/>
					<param name="server_url_info_list" type="map">
						<param name="protocol" type="string"/>
						<param name="domain_name" type="string"/>
						<param name="method" type="string"/>
						<param name="server_url" type="string"/>
					</param>
				</outputs>
			</function>
			<function name="createTrade">
				<auth>
					<accessToken require="Y" />
					<timesLimit millisecond="100" />
				</auth>
				<inputs>
					<param name="profit_type" type="string" />
					<param name="course_id" type="string" />
					<param name="trade_type" type="string"  require="Y" />
					<param name="cost_type" type="string"  require="Y" />
					<param name="payment_type" type="string" />
					<param name="trade_money" type="string" require="Y" />
					<param name="invite_code" type="string" />
				</inputs>
				<outputs>
					<param name="access_token" type="string"/>
					<param name="key" type="string"/>
					<param name="m_user_id" type="string"/>
					<param name="user_id" type="string"/>
					<param name="nick_name" type="rstring"/>
					<param name="server_url_info_update_time" type="long"/>
					<param name="avatar_address" type="string"/>
					<param name="im_account_info" type="string"/>
					<param name="web_im_url" type="string"/>
					<param name="server_url_info_list" type="map">
						<param name="protocol" type="string"/>
						<param name="domain_name" type="string"/>
						<param name="method" type="string"/>
						<param name="server_url" type="string"/>
					</param>
				</outputs>
			</function>


			<function name="generateWeixinPayBill">
				<auth>
					<accessToken require="Y" />
					<timesLimit millisecond="100" />
				</auth>
				<inputs>
					<param name="profit_type" type="string" require="Y,000100"  format="^[0-1]$,120011"/>
					<param name="course_id" type="string"/>
					<param name="invite_code" type="string"/>
					<param name="shop_id" type="string" require="Y,000100" />
					<param name="platform" type="string" />
				</inputs>
				<outputs>
					<param name="appId" type="string" />
					<param name="package" type="string" />
					<param name="paySign" type="string" />
					<param name="signType" type="string" />
					<param name="timeStamp" type="long" />
					<param name="nonceStr" type="string" />
				</outputs>
			</function>
			
			<function name="handleWeixinPayResult">

				<inputs>
				</inputs>
				<outputs>
					<param  type="object"/>
				</outputs>
			</function>
			
			<function name="feedback">
				<auth>
					<accessToken require="Y" />
					<timesLimit millisecond="100" />
				</auth>
				<inputs>
					<param name="content" type="string" require="Y"/>
					<param name="phone_number" type="string"/>
				</inputs>
				<outputs>
				</outputs>
			</function>
			
			<!-- 获取前端需要的配置信息 -->
			<function name="getSysConfiguration">
				<auth>
					<accessToken require="Y" />
				</auth>
				<inputs>
					<param name="config_key" type="string" require="N" />
				</inputs>
				<outputs>
					<param name="config_info_list" type="list">
						<param name="config_name" type="string"/>
						<param name="config_value" type="string"/>
						<param name="config_key" type="string"/>
					</param>
				</outputs>
			</function>
			
			<!-- 获取登录用户购买的指定类型课程id集合 -->
			<function name="getMyCourseIdList">
				<auth>
					<accessToken require="Y" />
				</auth>
				<inputs>
					<param name="course_type" type="string" require="N" />
				</inputs>
				<outputs>
					<param name="voice_id_list" type="list"/>
				</outputs>
			</function>
			<!-- 发送手机验证码 -->
			<function name="sendVerificationCode">
				<auth>
					<accessToken require="Y" />
				</auth>
				<inputs>
					<param name="phone" type="string" require="Y,000100"/>
					<param name="type" type="string" require="Y,000100"/>
				</inputs>
				<outputs>
				</outputs>
			</function>
			<!-- 绑定手机验证码 -->
			<function name="bindPhone">
				<auth>
					<accessToken require="Y" />
				</auth>
				<inputs>
					<param name="phone" type="string" require="Y,000100"/>
					<param name="verification_code" type="string" require="Y,000100"/>
				</inputs>
				<outputs>
				</outputs>
			</function>
			
		</default>
        <version num="1.0.0" class="">
        </version>
    </server>
 
</servers>
